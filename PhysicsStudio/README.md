# PhysicsStudio

PhysicsStudio 是一个基于 Jolt Physics 引擎的功能完整的图形用户界面工具，用于可视化物理模拟并实时调节各种物理参数。

## 功能特性

### 场景管理
- **场景选择**: 从下拉菜单中选择不同的物理测试场景
- **场景加载**: 支持加载现有的Jolt Physics测试场景
- **场景保存**: 将当前物理状态保存为文件
- **场景重置**: 一键重置当前场景到初始状态

### 物理参数调节
- **重力设置**: 实时调节重力强度（-50 到 50 m/s²）
- **时间步长**: 调节物理模拟的时间步长（30fps 到 120fps）
- **反弹系数**: 调节物体碰撞的反弹特性（0 到 1）
- **摩擦系数**: 调节物体表面摩擦力（0 到 2）
- **阻尼设置**: 
  - 线性阻尼：控制物体直线运动的阻力
  - 角阻尼：控制物体旋转运动的阻力

### 模拟控制
- **暂停/继续**: 暂停或继续物理模拟
- **单步执行**: 在暂停状态下逐帧执行物理模拟
- **实时统计**: 显示当前场景的物体数量、活跃物体数和接触点数

### 可视化功能
- **3D渲染**: 实时3D可视化物理世界
- **调试绘制**: 显示物体形状、接触点等调试信息
- **摄像机控制**: 自由视角浏览3D场景

## 使用方法

### 构建
1. 确保系统支持Windows平台和CMake
2. 运行构建脚本：
   ```bash
   cd Build
   cmake_vs2022_cl.bat
   ```
3. 在生成的Visual Studio解决方案中构建PhysicsStudio项目

### 运行
1. 启动PhysicsStudio.exe
2. 从"场景选择"下拉菜单中选择一个测试场景
3. 使用左侧面板的滑块调节各种物理参数
4. 使用控制按钮管理模拟状态

### 界面说明

#### 场景选择区域
- **场景下拉菜单**: 选择要加载的物理测试场景
- 包含所有可用的Jolt Physics测试案例

#### 物理参数区域
- **重力滑块**: 调节世界重力，负值表示向下的重力
- **时间步长滑块**: 调节模拟精度，较小值提供更精确的模拟
- **反弹系数滑块**: 0表示完全非弹性碰撞，1表示完全弹性碰撞
- **摩擦系数滑块**: 控制物体间的摩擦力大小
- **阻尼滑块**: 控制物体运动的能量损失

#### 模拟控制区域
- **暂停复选框**: 暂停或继续物理模拟
- **单步按钮**: 在暂停状态下执行一帧模拟
- **重置按钮**: 重新初始化当前场景
- **保存场景按钮**: 保存当前物理状态到文件
- **加载场景按钮**: 加载之前保存的场景文件

#### 状态信息区域
- **状态文本**: 显示当前操作状态和提示信息
- **统计信息**: 实时显示物理世界的统计数据

### 快捷键
- **鼠标拖拽**: 旋转视角
- **鼠标滚轮**: 缩放视图
- **WASD**: 移动摄像机（如果测试场景支持）

## 技术特性

### 架构
- 基于Jolt Physics引擎的原生C++应用
- 使用TestFramework UI系统构建图形界面
- 多线程物理模拟支持
- 内存高效的临时分配器

### 兼容性
- **平台**: Windows 10/11
- **编译器**: Visual Studio 2019/2022
- **依赖**: Jolt Physics, TestFramework

### 性能
- 支持最多10,240个物理物体
- 多核CPU并行处理
- 优化的碰撞检测算法
- 实时物理参数调节无性能损失

## 扩展功能

### 自定义场景
可以通过继承Test基类来创建自定义物理场景：

```cpp
class MyCustomTest : public Test 
{
public:
    virtual void Initialize() override;
    virtual void PrePhysicsUpdate(const PreUpdateParams &inParams) override;
    // ... 其他方法
};
```

### 物理属性批量修改
PhysicsStudio支持实时修改所有物体的物理属性，便于观察参数变化对整个系统的影响。

### 场景持久化
保存的场景文件(.jps格式)包含完整的物理状态，可以在不同会话间共享和重现。

## 故障排除

### 常见问题
1. **场景加载失败**: 确保选择了有效的测试场景
2. **性能问题**: 减少物体数量或降低模拟精度
3. **UI响应慢**: 检查是否启用了垂直同步

### 调试模式
在Debug配置下编译可以获得详细的调试信息和断言检查。

## 许可证
PhysicsStudio遵循MIT许可证，基于Jolt Physics引擎开发。